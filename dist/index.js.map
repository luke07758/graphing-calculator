{"version":3,"file":"index.js","sources":["../src/GraphSettings.js","../src/FunctionList.js","../src/Graph.js"],"sourcesContent":["import {useRef, useState, useEffect} from \"react\";\nimport styles from \"./GraphSettings.module.css\";\n\nconst GraphSettings = (props) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [darkMode, setDarkMode] = useState(false);\n  const [viewport, setViewport] = useState(props.viewPort);\n  const [maintainAspectRatio, setMaintainAspectRatio] = useState(true);\n  const [errorMessageVisible, setErrorMessageVisible] = useState(false);\n\n  const inputMinX = useRef(null);\n  const inputMaxX = useRef(null);\n  const inputMinY = useRef(null);\n  const inputMaxY = useRef(null);\n  const errorMessage = useRef(null);\n\n  const isValidNumber = (str) => {\n    return /^-?(?:\\d+|\\d+\\.\\d*|\\d*\\.\\d+)$/.test(str);\n  };\n\n  const handleSetViewport = () => {\n    let hasInvalidNumber = false;\n    let invalidInputs = \"\";\n    let errorStr = \"\";\n    if (inputMinX.current && inputMaxX.current && inputMinY.current && inputMaxY.current && errorMessage.current) {\n      if (!isValidNumber(inputMinX.current.value)) {\n        hasInvalidNumber = true;\n        invalidInputs = \", X min\"\n      }\n      if (!isValidNumber(inputMaxX.current.value)) {\n        hasInvalidNumber = true;\n        invalidInputs += \", X max\"\n      }\n      if (!isValidNumber(inputMinY.current.value)) {\n        hasInvalidNumber = true;\n        invalidInputs += \", Y min\"\n      }\n      if (!isValidNumber(inputMaxY.current.value)) {\n        hasInvalidNumber = true;\n        invalidInputs += \", Y max\"\n      }\n      if (hasInvalidNumber) {\n        errorStr = `Invalid number${invalidInputs.length > 7 ? \"s\" : \"\"}: ${invalidInputs.substring(2)}`;\n      }\n\n      const newViewport = {\n        xMin: parseFloat(inputMinX.current.value),\n        xMax: parseFloat(inputMaxX.current.value),\n        yMin: parseFloat(inputMinY.current.value),\n        yMax: parseFloat(inputMaxY.current.value)\n      };\n      if (maintainAspectRatio) {\n        const aspectRatio = (viewport.xMax - viewport.xMin) / (viewport.yMax - viewport.yMin);\n        const midY = (viewport.yMax + viewport.yMin) / 2;\n        const newHeight = (newViewport.xMax - newViewport.xMin) / aspectRatio;\n        newViewport.yMin = midY - (newHeight / 2);\n        newViewport.yMax = midY + (newHeight / 2);\n      }\n\n      if (newViewport.xMin >= newViewport.xMax) {\n        if (errorStr.length !== 0) {\n          errorStr += \"\\n\";\n        }\n        errorStr += \"X max must be greater than X min\";\n      }\n      if (newViewport.yMin >= newViewport.yMax) {\n        if (errorStr.length !== 0) {\n          errorStr += \"\\n\";\n        }\n        errorStr += \"Y max must be greater than Y min\";\n      }\n      if (errorStr.length !== 0) {\n        errorMessage.current.innerText = errorStr;\n        setErrorMessageVisible(true);\n        return;\n      }\n      errorMessage.current.innerText = \"\";\n      setErrorMessageVisible(false);\n      setViewport(newViewport);\n      // set viewport in parent component\n      props.setViewport(newViewport);\n    }\n  };\n\n  useEffect(() => {\n    if (inputMinX.current && inputMaxX.current && inputMinY.current && inputMaxY.current) {\n      inputMinX.current.value = props.viewPort.xMin.toFixed(2);\n      inputMaxX.current.value = props.viewPort.xMax.toFixed(2);\n      inputMinY.current.value = props.viewPort.yMin.toFixed(2);\n      inputMaxY.current.value = props.viewPort.yMax.toFixed(2);\n    }\n    setViewport(props.viewPort);\n  }, [props.viewPort]);\n\n  return (\n    <div\n      className={styles[\"settings-container\"]}\n      style={{\n        ... isOpen ? {width: 200 + \"px\", height: 270 + \"px\"} : {width: 40 + \"px\", height: 40 + \"px\"},\n        ... darkMode ? {backgroundColor: \"rgba(26,26,26,0.75)\", color: \"#fff\"} : {backgroundColor: \"rgba(230,230,230,0.75)\", color: \"#000\"}\n      }}\n    >\n      <div className={styles[\"title-wrapper\"]}>\n        <div>\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 231 231\"\n            className={`${styles[\"settings-icon\"]} ${isOpen ? styles.rotated : \"\"}`}\n            style={darkMode ? {filter: \"invert(100%)\", WebkitFilter: \"invert(100%)\"} : {}}\n            alt=\"Settings icon\"\n            onClick={() => setIsOpen(!isOpen)}\n          >\n            <g id=\"Layer_3\">\n              <g>\n                <path d=\"M40.65,34.96l15.49-6.42c4.54,4.11,10.35,6.37,16.39,6.37,3.05,0,6.04-.58,8.87-1.74,8.58-3.49,14.27-11.76,14.56-21.12l7.85-3.25,13.45,32.46-63.15,26.16-13.45-32.46Z\"/>\n                <path d=\"M103.54,9.46l13.06,31.54-62.23,25.78-13.06-31.54,14.74-6.11c4.6,4.06,10.43,6.29,16.49,6.29,3.12,0,6.17-.6,9.06-1.77,8.67-3.53,14.44-11.82,14.85-21.25l7.09-2.94M104.08,8.15l-8.61,3.57c-.15,9.02-5.46,17.42-14.25,21-2.84,1.15-5.78,1.7-8.69,1.7-6,0-11.84-2.33-16.28-6.45l-16.25,6.73,13.83,33.39,64.08-26.54-13.83-33.39h0Z\"/>\n              </g>\n              <g>\n                <path d=\"M113.73,41.27l13.45-32.46,7.85,3.25c.29,9.36,5.97,17.63,14.56,21.12,2.83,1.15,5.82,1.74,8.87,1.74,6.04,0,11.85-2.26,16.39-6.37l15.49,6.42-13.45,32.46-63.15-26.16Z\"/>\n                <path d=\"M127.44,9.46l7.09,2.94c.41,9.43,6.19,17.72,14.85,21.25,2.89,1.18,5.94,1.77,9.06,1.77,6.06,0,11.89-2.23,16.49-6.29l14.74,6.11-13.06,31.54-62.23-25.78,13.06-31.54M126.9,8.15l-13.83,33.39,64.08,26.54,13.83-33.39-16.25-6.73c-4.44,4.12-10.28,6.45-16.28,6.45-2.91,0-5.85-.55-8.68-1.7-8.79-3.58-14.1-11.98-14.25-21l-8.61-3.57h0Z\"/>\n              </g>\n              <g>\n                <path d=\"M166.43,61.87l32.46-13.45,3.25,7.85c-6.42,6.82-8.24,16.69-4.64,25.23,3.55,8.42,11.83,14.12,21.14,14.59l6.42,15.49-32.46,13.45-26.16-63.15Z\"/>\n                <path d=\"M198.62,49.07l2.94,7.09c-6.37,6.96-8.16,16.9-4.52,25.53,3.59,8.5,11.88,14.29,21.26,14.87l6.11,14.74-31.54,13.06-25.78-62.23,31.54-13.06M199.16,47.77l-33.39,13.83,26.54,64.08,33.39-13.83-6.73-16.25c-8.99-.33-17.37-5.65-21.02-14.3-3.69-8.74-1.5-18.44,4.77-24.92l-3.57-8.61h0Z\"/>\n              </g>\n              <g>\n                <path d=\"M6.19,111.74l6.42-15.49c9.31-.47,17.58-6.16,21.14-14.59,3.6-8.54,1.77-18.41-4.64-25.23l3.25-7.85,32.46,13.45-26.16,63.15-32.46-13.45Z\"/>\n                <path d=\"M32.62,49.24l31.54,13.06-25.78,62.23-31.54-13.06,6.11-14.74c9.37-.59,17.67-6.37,21.26-14.87,3.64-8.62,1.86-18.57-4.52-25.53l2.94-7.09M32.08,47.93l-3.57,8.61c6.27,6.49,8.45,16.18,4.77,24.92-3.65,8.65-12.03,13.96-21.02,14.3l-6.73,16.25,33.39,13.83,26.54-64.08-33.39-13.83h0Z\"/>\n              </g>\n              <g>\n                <path d=\"M95.96,218.96c-.29-9.36-5.97-17.63-14.56-21.12-2.83-1.15-5.82-1.74-8.87-1.74-6.04,0-11.85,2.26-16.39,6.37l-15.49-6.42,13.45-32.46,63.15,26.16-13.45,32.46-7.85-3.25Z\"/>\n                <path d=\"M54.37,164.24l62.23,25.78-13.06,31.54-7.09-2.94c-.41-9.43-6.19-17.72-14.85-21.25-2.89-1.18-5.94-1.77-9.06-1.77-6.06,0-11.89,2.23-16.49,6.29l-14.74-6.11,13.06-31.54M53.83,162.93l-13.83,33.39,16.25,6.73c4.44-4.12,10.28-6.45,16.28-6.45,2.91,0,5.85.55,8.69,1.7,8.79,3.58,14.1,11.98,14.25,21l8.61,3.57,13.83-33.39-64.08-26.54h0Z\"/>\n              </g>\n              <g>\n                <path d=\"M113.73,189.74l63.15-26.16,13.45,32.46-15.49,6.42c-4.54-4.11-10.35-6.37-16.39-6.37-3.05,0-6.04.58-8.87,1.74-8.58,3.49-14.27,11.76-14.56,21.12l-7.85,3.25-13.45-32.46Z\"/>\n                <path d=\"M176.61,164.24l13.06,31.54-14.74,6.11c-4.6-4.06-10.43-6.29-16.49-6.29-3.12,0-6.17.6-9.06,1.77-8.67,3.53-14.44,11.82-14.85,21.25l-7.09,2.94-13.06-31.54,62.23-25.78M177.15,162.93l-64.08,26.54,13.83,33.39,8.61-3.57c.15-9.02,5.46-17.42,14.25-21,2.84-1.15,5.78-1.7,8.68-1.7,6,0,11.84,2.33,16.28,6.45l16.25-6.73-13.83-33.39h0Z\"/>\n              </g>\n              <g>\n                <path d=\"M166.68,169.22l26.16-63.15,32.46,13.45-6.42,15.49c-9.31.47-17.58,6.17-21.14,14.59-3.6,8.54-1.77,18.41,4.64,25.23l-3.25,7.85-32.46-13.45Z\"/>\n                <path d=\"M193.11,106.72l31.54,13.06-6.11,14.74c-9.37.59-17.67,6.37-21.26,14.87-3.64,8.62-1.86,18.57,4.52,25.53l-2.94,7.09-31.54-13.06,25.78-62.23M192.57,105.42l-26.54,64.08,33.39,13.83,3.57-8.61c-6.27-6.49-8.45-16.18-4.77-24.92,3.65-8.65,12.03-13.96,21.02-14.3l6.73-16.25-33.39-13.83h0Z\"/>\n              </g>\n              <g>\n                <path d=\"M28.61,174.82c6.42-6.82,8.24-16.69,4.64-25.23-3.55-8.42-11.82-14.12-21.14-14.59l-6.42-15.49,32.46-13.45,26.16,63.15-32.46,13.45-3.25-7.85Z\"/>\n                <path d=\"M37.89,106.72l25.78,62.23-31.54,13.06-2.94-7.09c6.37-6.96,8.16-16.9,4.52-25.53-3.59-8.5-11.88-14.29-21.26-14.87l-6.11-14.74,31.54-13.06M38.43,105.42l-33.39,13.83,6.73,16.25c8.99.33,17.37,5.65,21.02,14.3,3.69,8.74,1.5,18.44-4.77,24.92l3.57,8.61,33.39-13.83-26.54-64.08h0Z\"/>\n              </g>\n            </g>\n            <g id=\"Layer_1\">\n              <g id=\"Layer_2\">\n                <g>\n                  <path d=\"M116,202.5c-47.97,0-87-39.03-87-87S68.03,28.5,116,28.5s87,39.03,87,87-39.03,87-87,87ZM116,62.5c-29.22,0-53,23.78-53,53s23.78,53,53,53,53-23.78,53-53-23.78-53-53-53Z\"/>\n                  <path d=\"M116,29c47.7,0,86.5,38.8,86.5,86.5s-38.8,86.5-86.5,86.5S29.5,163.2,29.5,115.5,68.3,29,116,29M116,169c29.5,0,53.5-24,53.5-53.5s-24-53.5-53.5-53.5-53.5,24-53.5,53.5,24,53.5,53.5,53.5M116,28c-48.32,0-87.5,39.18-87.5,87.5s39.18,87.5,87.5,87.5,87.5-39.18,87.5-87.5S164.32,28,116,28h0ZM116,168c-28.99,0-52.5-23.51-52.5-52.5s23.51-52.5,52.5-52.5,52.5,23.5,52.5,52.5-23.51,52.5-52.5,52.5h0Z\"/>\n                </g>\n              </g>\n              <g>\n                <rect x=\"96\" y=\".5\" width=\"39\" height=\"39\" rx=\"7.38\" ry=\"7.38\"/>\n                <path d=\"M127.62,1c3.79,0,6.88,3.09,6.88,6.88v24.24c0,3.79-3.09,6.88-6.88,6.88h-24.24c-3.79,0-6.88-3.09-6.88-6.88V7.88c0-3.79,3.09-6.88,6.88-6.88h24.24M127.62,0h-24.24c-4.33,0-7.88,3.55-7.88,7.88v24.24c0,4.33,3.55,7.88,7.88,7.88h24.24c4.33,0,7.88-3.55,7.88-7.88V7.88c0-4.33-3.55-7.88-7.88-7.88h0Z\"/>\n              </g>\n              <g>\n                <rect x=\"96\" y=\"191.5\" width=\"39\" height=\"39\" rx=\"7.38\" ry=\"7.38\"/>\n                <path d=\"M127.62,192c3.79,0,6.88,3.09,6.88,6.88v24.24c0,3.79-3.09,6.88-6.88,6.88h-24.24c-3.79,0-6.88-3.09-6.88-6.88v-24.24c0-3.79,3.09-6.88,6.88-6.88h24.24M127.62,191h-24.24c-4.33,0-7.88,3.55-7.88,7.88v24.24c0,4.33,3.55,7.88,7.88,7.88h24.24c4.33,0,7.88-3.55,7.88-7.88v-24.24c0-4.33-3.55-7.88-7.88-7.88h0Z\"/>\n              </g>\n              <g>\n                <path d=\"M47.97,72.48c-1.98,0-3.83-.76-5.22-2.15l-17.14-17.14c-1.39-1.39-2.15-3.24-2.15-5.22s.76-3.83,2.15-5.22l17.14-17.14c1.39-1.39,3.24-2.15,5.22-2.15s3.83.76,5.22,2.15l17.14,17.14c2.88,2.88,2.88,7.56,0,10.44l-17.14,17.14c-1.39,1.39-3.24,2.15-5.22,2.15Z\"/>\n                <path d=\"M47.97,23.96c1.84,0,3.57.71,4.87,2.01l17.14,17.14c1.29,1.29,2.01,3.02,2.01,4.87s-.71,3.57-2.01,4.87l-17.14,17.14c-1.29,1.29-3.02,2.01-4.87,2.01s-3.57-.71-4.87-2.01l-17.14-17.14c-1.29-1.29-2.01-3.02-2.01-4.87s.71-3.57,2.01-4.87l17.14-17.14c1.29-1.29,3.02-2.01,4.87-2.01M47.97,22.96c-2.02,0-4.04.77-5.57,2.3l-17.14,17.14c-3.06,3.06-3.06,8.08,0,11.15l17.14,17.14c1.53,1.53,3.55,2.3,5.57,2.3s4.04-.77,5.57-2.3l17.14-17.14c3.06-3.06,3.06-8.08,0-11.15l-17.14-17.14c-1.53-1.53-3.55-2.3-5.57-2.3h0Z\"/>\n              </g>\n              <g>\n                <path d=\"M183.03,207.54c-1.98,0-3.83-.76-5.22-2.15l-17.14-17.14c-2.88-2.88-2.88-7.56,0-10.44l17.14-17.14c1.39-1.39,3.24-2.15,5.22-2.15s3.83.76,5.22,2.15l17.14,17.14c2.88,2.88,2.88,7.56,0,10.44l-17.14,17.14c-1.39,1.39-3.24,2.15-5.22,2.15Z\"/>\n                <path d=\"M183.03,159.02c1.84,0,3.57.71,4.87,2.01l17.14,17.14c2.68,2.68,2.68,7.05,0,9.73l-17.14,17.14c-1.29,1.29-3.02,2.01-4.87,2.01s-3.57-.71-4.87-2.01l-17.14-17.14c-2.68-2.68-2.68-7.05,0-9.73l17.14-17.14c1.29-1.29,3.02-2.01,4.87-2.01M183.03,158.02c-2.02,0-4.04.77-5.57,2.3l-17.14,17.14c-3.06,3.06-3.06,8.08,0,11.15l17.14,17.14c1.53,1.53,3.55,2.3,5.57,2.3s4.04-.77,5.57-2.3l17.14-17.14c3.06-3.06,3.06-8.08,0-11.15l-17.14-17.14c-1.53-1.53-3.55-2.3-5.57-2.3h0Z\"/>\n              </g>\n              <g>\n                <rect x=\".5\" y=\"96\" width=\"39\" height=\"39\" rx=\"7.38\" ry=\"7.38\"/>\n                <path d=\"M32.12,96.5c3.79,0,6.88,3.09,6.88,6.88v24.24c0,3.79-3.09,6.88-6.88,6.88H7.88c-3.79,0-6.88-3.09-6.88-6.88v-24.24c0-3.79,3.09-6.88,6.88-6.88h24.24M32.12,95.5H7.88c-4.33,0-7.88,3.55-7.88,7.88v24.24c0,4.33,3.55,7.88,7.88,7.88h24.24c4.33,0,7.88-3.55,7.88-7.88v-24.24c0-4.33-3.55-7.88-7.88-7.88h0Z\"/>\n              </g>\n              <g>\n                <rect x=\"191.5\" y=\"96\" width=\"39\" height=\"39\" rx=\"7.38\" ry=\"7.38\"/>\n                <path d=\"M223.12,96.5c3.79,0,6.88,3.09,6.88,6.88v24.24c0,3.79-3.09,6.88-6.88,6.88h-24.24c-3.79,0-6.88-3.09-6.88-6.88v-24.24c0-3.79,3.09-6.88,6.88-6.88h24.24M223.12,95.5h-24.24c-4.33,0-7.88,3.55-7.88,7.88v24.24c0,4.33,3.55,7.88,7.88,7.88h24.24c4.33,0,7.88-3.55,7.88-7.88v-24.24c0-4.33-3.55-7.88-7.88-7.88h0Z\"/>\n              </g>\n              <g>\n                <path d=\"M47.97,207.54c-1.98,0-3.83-.76-5.22-2.15l-17.14-17.14c-2.88-2.88-2.88-7.56,0-10.44l17.14-17.14c1.39-1.39,3.24-2.15,5.22-2.15s3.83.76,5.22,2.15l17.14,17.14c2.88,2.88,2.88,7.56,0,10.44l-17.14,17.14c-1.39,1.39-3.24,2.15-5.22,2.15Z\"/>\n                <path d=\"M47.97,159.02c1.84,0,3.57.71,4.87,2.01l17.14,17.14c2.68,2.68,2.68,7.05,0,9.73l-17.14,17.14c-1.29,1.29-3.02,2.01-4.87,2.01s-3.57-.71-4.87-2.01l-17.14-17.14c-1.29-1.29-2.01-3.02-2.01-4.87s.71-3.57,2.01-4.87l17.14-17.14c1.29-1.29,3.02-2.01,4.87-2.01M47.97,158.02c-2.02,0-4.04.77-5.57,2.3l-17.14,17.14c-3.06,3.06-3.06,8.08,0,11.15l17.14,17.14c1.53,1.53,3.55,2.3,5.57,2.3s4.04-.77,5.57-2.3l17.14-17.14c3.06-3.06,3.06-8.08,0-11.15l-17.14-17.14c-1.53-1.53-3.55-2.3-5.57-2.3h0Z\"/>\n              </g>\n              <g>\n                <path d=\"M183.03,72.48c-1.98,0-3.83-.76-5.22-2.15l-17.14-17.14c-1.39-1.39-2.15-3.24-2.15-5.22s.76-3.83,2.15-5.22l17.14-17.14c1.39-1.39,3.24-2.15,5.22-2.15s3.83.76,5.22,2.15l17.14,17.14c1.39,1.39,2.15,3.24,2.15,5.22s-.76,3.83-2.15,5.22l-17.14,17.14c-1.39,1.39-3.24,2.15-5.22,2.15Z\"/>\n                <path d=\"M183.03,23.96c1.84,0,3.57.71,4.87,2.01l17.14,17.14c2.68,2.68,2.68,7.05,0,9.73l-17.14,17.14c-1.29,1.29-3.02,2.01-4.87,2.01s-3.57-.71-4.87-2.01l-17.14-17.14c-2.68-2.68-2.68-7.05,0-9.73l17.14-17.14c1.29-1.29,3.02-2.01,4.87-2.01M183.03,22.96c-2.02,0-4.04.77-5.57,2.3l-17.14,17.14c-3.06,3.06-3.06,8.08,0,11.15l17.14,17.14c1.53,1.53,3.55,2.3,5.57,2.3s4.04-.77,5.57-2.3l17.14-17.14c3.06-3.06,3.06-8.08,0-11.15l-17.14-17.14c-1.53-1.53-3.55-2.3-5.57-2.3h0Z\"/>\n              </g>\n            </g>\n          </svg>\n        </div>\n        <div className={styles[\"settings-title\"]}>Settings</div>\n      </div>\n      <hr/>\n      <div style={{display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: \"10px\"}}>\n        <div style={{fontSize: \"20px\", whiteSpace: \"nowrap\", overflow: \"hidden\", marginRight: \"10px\"}}>Dark Mode</div>\n        <label className={styles.switch}>\n          <input type=\"checkbox\" onClick={(event) => {\n            props.toggleDarkMode();\n            setDarkMode(event.target.checked);\n          }}/>\n          <span className={`${styles.slider} ${styles.round}`}/>\n        </label>\n      </div>\n      <div style={{fontSize: \"20px\", margin: \"15px 0 10px 0\"}}>Viewport</div>\n      <div style={{display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\"}}>\n        <input\n          className={styles[\"range-input\"]}\n          type=\"text\"\n          style={{\n            width: \"60px\", \n            filter: `invert(${darkMode ? \"100\" : \"0\"}%`,\n            msFilter: `invert(${darkMode ? \"100\" : \"0\"}%`,\n            WebkitFilter: `invert(${darkMode ? \"100\" : \"0\"}%`,\n            \"--focus-color\": darkMode ? \"#de690c\" : \"#2196f3\"\n          }}\n          defaultValue={viewport.xMin.toFixed(2)}\n          ref={inputMinX}\n        />\n        <div style={{whiteSpace: \"nowrap\", overflow: \"hidden\"}}>&#60; &#x1D465; &#60;</div>\n        <input\n          className={styles[\"range-input\"]}\n          type=\"text\"\n          style={{\n            width: \"60px\", \n            filter: `invert(${darkMode ? \"100\" : \"0\"}%`,\n            msFilter: `invert(${darkMode ? \"100\" : \"0\"}%`,\n            WebkitFilter: `invert(${darkMode ? \"100\" : \"0\"}%`,\n            \"--focus-color\": darkMode ? \"#de690c\" : \"#2196f3\"\n          }}\n          defaultValue={viewport.xMax.toFixed(2)}\n          ref={inputMaxX}\n        />\n      </div>\n      <div style={{display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\"}}>\n        <input\n          className={styles[\"range-input\"]}\n          type=\"text\"\n          style={{\n            width: \"60px\", \n            filter: `invert(${darkMode ? \"100\" : \"0\"}%`,\n            msFilter: `invert(${darkMode ? \"100\" : \"0\"}%`,\n            WebkitFilter: `invert(${darkMode ? \"100\" : \"0\"}%`,\n            \"--focus-color\": darkMode ? \"#de690c\" : \"#2196f3\"\n          }}\n          defaultValue={viewport.yMin.toFixed(2)}\n          disabled={maintainAspectRatio}\n          ref={inputMinY}\n        />\n        <div style={{whiteSpace: \"nowrap\", overflow: \"hidden\"}}>&#60; &#x1D466; &#60;</div>\n        <input\n          className={styles[\"range-input\"]}\n          type=\"text\"\n          style={{\n            width: \"60px\", \n            filter: `invert(${darkMode ? \"100\" : \"0\"}%`,\n            msFilter: `invert(${darkMode ? \"100\" : \"0\"}%`,\n            WebkitFilter: `invert(${darkMode ? \"100\" : \"0\"}%`,\n            \"--focus-color\": darkMode ? \"#de690c\" : \"#2196f3\"\n          }}\n          defaultValue={viewport.yMax.toFixed(2)}\n          disabled={maintainAspectRatio}\n          ref={inputMaxY}\n        />\n      </div>\n      <div style={{display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\", marginTop: \"5px\"}}>\n        <div style={{whiteSpace: \"nowrap\", overflow: \"hidden\"}}>Maintain Aspect Ratio</div>\n        <input\n          type=\"checkbox\"\n          id=\"ratio\"\n          style={{cursor: \"pointer\"}}\n          checked={maintainAspectRatio}\n          onChange={(e) => setMaintainAspectRatio(e.target.checked)}\n        />\n      </div>\n      <div\n        style={{color: \"red\"}}\n        visibility={errorMessageVisible ? \"visible\" : \"hidden\"}\n        ref={errorMessage}\n      />\n      <div style={{display: \"flex\", alignItems: \"center\", justifyContent: \"end\", marginTop: \"10px\"}}>\n          <div \n            className={darkMode ? styles[\"viewport-button-dark\"] : styles[\"viewport-button-light\"]}\n            onClick={() => handleSetViewport()}>Save Viewport</div>\n      </div>\n    </div>\n  );\n}\n\nexport default GraphSettings;","import {useState, useRef, useEffect} from \"react\";\nimport styles from \"./FunctionList.module.css\";\n\n// TODO: Polish UI\n// TODO: add more settings\nconst defaultColors = [\"#2196F3\", \"#E81E62\", \"#009688\", \"#673AB7\", \"#CDDC39\"];\nfunction FunctionList(props) {\n  const [functions, setFunctions] = useState([{name: \"f\", color: \"#2196F3\", value: \"\"}]);\n  const [isOpen, setIsOpen] = useState(true);\n  const inputRefs = useRef({});\n  const numFunctions = useRef(1);\n  const wrapperRef = useRef(null);\n  const cursorPos = useRef({});\n\n  const changeChars = (e, index) => {\n    let inputStr = e.target.value;\n    let changedInput = \"\";\n\n    for (let i = 0; i < inputStr.length; i++) {\n      let currentChar = inputStr.charAt(i);\n      if (currentChar >= \"a\" && currentChar <= \"g\") {\n        changedInput += String.fromCodePoint(currentChar.codePointAt() + 0x1D3ED);\n      } else if (currentChar == \"h\") {\n        changedInput += String.fromCharCode(0x210E);\n      } else if (currentChar >= \"i\" && currentChar <= \"z\") {\n        changedInput += String.fromCodePoint(currentChar.codePointAt() + 0x1D3ED);\n      } else if (currentChar >= \"A\" && currentChar <= \"Z\") {\n        changedInput += String.fromCodePoint(currentChar.codePointAt() + 0x1D3F3);\n      } else {\n        changedInput += currentChar;\n      }\n    }\n    // replace pi with pi symbol\n    while (changedInput.includes(String.fromCodePoint(0x1D45D, 0x1D456))) {\n      changedInput.replace(String.fromCodePoint(0x1D45D, 0x1D456), String.fromCodePoint(0x1D70B));\n      //if (selectionIndex) selectionIndex--;\n    }\n\n    const functionsCopy = [...functions];\n    functionsCopy[index].value = changedInput;\n    setFunctions(functionsCopy);\n    // TODO: fix moving cursor position\n    //if (selectionIndex) cursorPos.current = {index: index, pos: selectionIndex};\n    parseFunction(changedInput, index);\n  };\n\n  const parseFunction = (inputStr, index) => {\n    let functionStr = \"\";\n    for (let currentChar of inputStr) {\n      if (currentChar.codePointAt() >= 0x1D44E && currentChar.codePointAt() <= 0x1D454) {\n        functionStr += String.fromCodePoint(currentChar.codePointAt() - 0x1D3ED);\n      } else if (currentChar.codePointAt() === 0x210E) {\n        functionStr += \"h\";\n      } else if (currentChar.codePointAt() >= 0x1D456 && currentChar.codePointAt() <= 0x1D467) {\n        functionStr += String.fromCodePoint(currentChar.codePointAt() - 0x1D3ED);\n      } else if (currentChar.codePointAt() >= 0x1D434 && currentChar <= 0x1D44D) {\n        functionStr += String.fromCodePoint(currentChar.codePointAt() - 0x1D3F3);\n      } else if (currentChar.codePointAt() === 0x1D70B) {\n        functionStr += \"pi\";\n      } else {\n        functionStr += currentChar;\n      }\n    }\n    props.addFunction(index, functionStr, functions[index].color);\n  };\n\n  useEffect(() => {\n    if (cursorPos.current.index) {\n      inputRefs.current[cursorPos.current.index].selectionStart = cursorPos.current.pos - 2;\n      inputRefs.current[cursorPos.current.index].selectionEnd = cursorPos.current.pos - 2;\n      inputRefs.current[cursorPos.current.index].focus();\n    }\n  }, [cursorPos]);\n\n  return (\n    <div className={`${styles[\"functions\"]} ${isOpen ? styles[\"active\"] : \"\"}`}>\n      <div className={styles[\"functions-wrapper\"]}\n        ref={wrapperRef}\n        style={{\n          height: `${numFunctions.current * 42 + 30}px`,\n          backgroundColor: props.darkMode ? \"rgba(26,26,26,0.75)\" : \"rgba(230,230,230,0.75\"\n        }}>\n        {functions.map((func, index) => (func !== null && (\n          <div className={styles[\"function-container\"]} key={index}>\n            <div className={`${styles[\"function-name\"]} ${props.darkMode ? styles.dark : styles.light}`}>\n              {String.fromCodePoint((0x1D453 + index === 0x1D455 ? 0x210E : 0x1D453 + index) + (index > 17 ? 1 : 0))}(&#x1D465;)=\n            </div>\n            <input className={`${styles[\"function-input\"]} ${props.darkMode ? styles.dark : styles.light}`} \n              onInput={(e) => changeChars(e, index)} \n              value={functions[index].value}\n              ref={(el) => (inputRefs.current[index] = el)}\n            />\n            <input className={styles[\"color-input\"]} type=\"color\" value={func.color} onChange={(e) => { \n              const functionsCopy = [...functions];\n              functionsCopy[index].color = e.target.value;\n              setFunctions(functionsCopy);\n              props.changeColor(index, e.target.value);\n            }}/>\n            <button \n              className={styles[\"delete-function\"]}\n              style={{\n                cursor: \"pointer\",\n                filter: props.darkMode ? \"invert(100%)\" : \"\",\n                msFilter: props.darkMode ? \"invert(100%)\" : \"\",\n                WebkitFilter: props.darkMode ? \"invert(100%)\" : \"\",\n              }}\n              onClick={() => {\n                const functionsCopy = [...functions];\n                if (numFunctions.current === 1) {\n                  functionsCopy[index].value = \"\";\n                } else {\n                  numFunctions.current--;\n                  functionsCopy[index] = null;\n                }\n                setFunctions(functionsCopy);\n                props.deleteFunction(index);\n              }}  \n            >X</button>\n          </div>\n        )))}\n        <div style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n          <button \n            style={{\n              cursor: \"pointer\",\n              filter: props.darkMode ? \"invert(100%)\" : \"\",\n              msFilter: props.darkMode ? \"invert(100%)\" : \"\",\n              WebkitFilter: props.darkMode ? \"invert(100%)\" : \"\"\n            }}\n            onClick={() => {\n              numFunctions.current++;\n              let functionsCopy = [...functions];\n              for (let i = 0; i < functionsCopy.length; i++) {\n                if (functionsCopy[i] === null) {\n                  functionsCopy[i] = {name: String.fromCharCode(66 + i), color: defaultColors[i % defaultColors.length]};\n                  setFunctions(functionsCopy);\n                  return;\n                }\n              }\n              let index = functions.length;\n              setFunctions([...functions, {name: String.fromCharCode(66 + index), color: defaultColors[index % defaultColors.length]}]);\n            }}\n          >+</button>\n        </div>\n      </div>\n      <div\n          className={styles[\"list-icon\"]}\n          style={{\n            backgroundColor: props.darkMode ? \"rgba(26,26,26,0.75)\" : \"rgba(230,230,230,0.75\"\n          }}\n          onClick={() => setIsOpen(!isOpen)}\n        >\n          <svg \n            xmlns=\"http://www.w3.org/2000/svg\" \n            viewBox=\"0 0 24 24\" \n            style={{\n              height: \"40px\",\n              transform: `rotate(${isOpen ? -90 : 90}deg)`,\n              transition: \"transform 0.5s ease\"\n            }}\n          >\n            <path \n              d=\"M9 12.75L12 9.75L15 12.75M21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25C17.3848 2.25 21.75 6.61522 21.75 12Z\"\n              stroke={props.darkMode ? \"white\" : \"black\"}\n              strokeWidth=\"1.5\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              fill=\"none\"\n            />\n          </svg>\n        </div>\n    </div>\n  );\n}\nexport default FunctionList;","import {useRef, useEffect, useState} from \"react\";\nimport GraphSettings from \"./GraphSettings\";\nimport FunctionList from \"./FunctionList\";\nimport styles from \"./Graph.module.css\";\nimport workerStr from \"./worker.js\";\n\nconst FONT = \"25px Latin Modern Math\";\nconst zoomFactor = Math.pow(1.5, 0.1);\n\nfunction Graph() {\n  const containerRef = useRef(null);\n  const [viewport, setViewport] = useState({\n    xMin: -12,\n    xMax: 12,\n    yMin: -12,\n    yMax: 12\n  });\n  const mouseDown = useRef(false);\n  const canvasRef = useRef(null);\n  const mouseX = useRef(-1);\n  const mouseY = useRef(-1);\n  const majorWidth = useRef(null);\n  const minorWidth = useRef(null);\n  const animationFrameCall = useRef(null);\n  const [darkMode, setDarkMode] = useState(false);\n  const colors = useRef({\n    primary: \"#000\",\n    secondary: \"#c0c0c0\",\n    background: \"#fff\"\n  });\n  const functions = useRef([]);\n\n  const drawGraph = () => {\n    // Formats number to string for graph labels\n    const formattedString = (i) => {\n      let exp = i.toExponential();\n      let str = exp.split(\"e\")[0] + String.fromCharCode(215) + \"10\";\n      exp = exp.split(\"e\")[1].split(\"+\").at(-1);\n      if (parseInt(exp) < 4 && parseInt(exp) > -3) {\n        return \"\" + i;\n      }\n      // Add superscript for scientific notation\n      while (exp.length > 0) {\n        let firstNum = parseInt(exp.substring(0,1));\n        switch (isNaN(firstNum) || firstNum) {\n          case true: // negative\n            str += String.fromCharCode(8315);\n            break;\n          case 1:\n            str += String.fromCharCode(185);\n            break;\n          case 2:\n          case 3:\n            str += String.fromCharCode(176 + firstNum);\n            break;\n          default:\n            str += String.fromCharCode(8304 + firstNum);\n        }\n        exp = exp.substring(1);\n      }\n      return str;\n    }\n\n    const ctx = canvasRef.current.getContext(\"2d\");\n    ctx.font = FONT;\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    ctx.fillStyle = colors.current.background;\n    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    ctx.strokeStyle = colors.current.primary;\n\n    // Save lines to draw in order minor -> major -> axes\n    var minorLines = [];\n    var majorLines = [];\n    var axes = [];\n    // Save labels to draw after lines\n    var labelRects = [];\n    var labels = [];\n\n    // Draw vertical lines\n    const startX = Math.ceil(viewport.xMin / minorWidth.current);\n    const endX = Math.floor(viewport.xMax / minorWidth.current);\n    for (let i = startX; i <= endX; i++) {\n      const x = (i == 0) ? 0 : parseFloat((i * minorWidth.current).toPrecision(Math.floor(Math.log10(Math.abs(i) * minorWidth.current)) - Math.floor(Math.log10(minorWidth.current)) + 1));\n\n      // Don't draw on axes\n      if (x == 0) continue;\n\n      // Convert x value to pixel coordinates and draw line\n      const pos = (x - viewport.xMin) * ctx.canvas.width / (viewport.xMax - viewport.xMin);\n\n      const line = [\n        pos,\n        0,\n        pos,\n        ctx.canvas.height\n      ];\n\n      // Draw major lines in primary color, minor lines in secondary\n      if (Math.abs(x % majorWidth.current) < minorWidth.current / 2 ||\n          Math.abs(x % majorWidth.current) > majorWidth.current - minorWidth.current / 2) {\n        \n        majorLines.push(line);\n\n        // Add number labels\n        var label = formattedString(x);\n        \n        const padding = 4;\n        const textWidth = ctx.measureText(label).width;\n        const textHeight = parseInt(ctx.font);\n        // Draw labels below axis if on screen\n        const topY = padding;\n        const axisY = viewport.yMax * ctx.canvas.height / (viewport.yMax - viewport.yMin) + padding;\n        const bottomY = ctx.canvas.height - (padding * 3) - textHeight;\n        \n        if (axisY > bottomY) {\n          labelRects.push([\n            pos - (textWidth / 2) - padding,\n            bottomY,\n            textWidth + (padding * 2),\n            textHeight + (padding * 2)\n          ]);\n          labels.push([\n            label, \n            pos - (textWidth / 2), \n            ctx.canvas.height - (padding * 2)\n          ]);\n        } else if (axisY < topY) {\n          labelRects.push([\n            pos - (textWidth / 2) - padding,\n            topY,\n            textWidth + (padding * 2),\n            textHeight + (padding * 2)\n          ]);\n          labels.push([\n            label, \n            pos - (textWidth / 2), \n            padding + textHeight\n          ]);\n        } else {\n          labelRects.push([\n            pos - (textWidth / 2) - padding,\n            axisY,\n            textWidth + (padding * 2),\n            textHeight + (padding * 2)\n          ]);\n          labels.push([\n            label, \n            pos - (textWidth / 2), \n            axisY + textHeight\n          ]);\n        }\n      } else {\n        minorLines.push(line);\n      }\n    }\n\n    // Draw horizontal lines\n    const startY = Math.ceil(viewport.yMin / minorWidth.current);\n    const endY = Math.floor(viewport.yMax / minorWidth.current);\n    for (let i = startY; i <= endY; i++) {\n      const y = (i == 0) ? 0 : parseFloat((i * minorWidth.current).toPrecision(Math.floor(Math.log10(Math.abs(i) * minorWidth.current)) - Math.floor(Math.log10(minorWidth.current)) + 1));\n\n      // Don't draw on axes\n      if (y == 0) continue;\n\n      // Convert y value to pixel coordinates and draw line\n      const pos = (viewport.yMax - y) * ctx.canvas.height / (viewport.yMax - viewport.yMin);\n\n      const line = [\n        0,\n        pos,\n        ctx.canvas.width,\n        pos\n      ];\n\n      // Draw major lines in black, minor lines in silver\n      if (Math.abs(y % majorWidth.current) < minorWidth.current / 2 ||\n          Math.abs(y % majorWidth.current) > majorWidth.current - minorWidth.current / 2) {\n        majorLines.push(line);\n\n        // Add number labels\n        const label = formattedString(y);\n        const padding = 4;\n        const textWidth = ctx.measureText(label).width;\n        const textHeight = parseInt(ctx.font);\n        // Draw labels below axis if on screen\n        const leftX = padding;\n        const axisX = (0 - viewport.xMin) * ctx.canvas.width / (viewport.xMax - viewport.xMin) - (padding * 3) - textWidth;\n        const rightX = ctx.canvas.width - (padding * 3) - textWidth;\n        if (axisX > rightX) {\n          labelRects.push([\n            rightX,\n            pos - (textHeight / 2) - padding,\n            textWidth + (padding * 2),\n            textHeight + (padding * 2)\n          ]);\n          labels.push([\n            label,\n            ctx.canvas.width - (padding * 2) - textWidth,\n            pos + padding\n          ]);\n        } else if (axisX < leftX) {\n          labelRects.push([\n            leftX,\n            pos - (textHeight / 2) - padding,\n            textWidth + (padding * 2),\n            textHeight + (padding * 2)\n          ]);\n          labels.push([\n            label,\n            padding * 2,\n            pos + padding\n          ]);\n        } else {\n          labelRects.push([\n            axisX,\n            pos - (textHeight / 2) - padding,\n            textWidth + (padding * 2),\n            textHeight + (padding * 2)\n          ]);\n          ctx.fillStyle = colors.current.primary;\n          labels.push([\n            label,\n            axisX + padding,\n            pos + padding\n          ]);\n        }\n      } else {\n        minorLines.push(line);\n      }\n    }\n\n    // Draw x-axis\n    ctx.strokeStyle = colors.current.primary;\n    if (viewport.yMin <= 0 && viewport.yMax >= 0) {\n      axes.push([\n        0,\n        (viewport.yMax * ctx.canvas.height) / (viewport.yMax - viewport.yMin),\n        ctx.canvas.width,\n        (viewport.yMax * ctx.canvas.height) / (viewport.yMax - viewport.yMin)\n      ]);\n    }\n    // Draw y-axis\n    if (viewport.xMin <= 0 && viewport.xMax >= 0) {\n      axes.push([\n        (Math.abs(viewport.xMin) * ctx.canvas.width) / (viewport.xMax - viewport.xMin),\n        0,\n        (Math.abs(viewport.xMin) * ctx.canvas.width) / (viewport.xMax - viewport.xMin),\n        ctx.canvas.height\n      ]);\n    }\n    \n    // Draw lines\n    ctx.beginPath();\n    ctx.strokeStyle = colors.current.secondary;\n    ctx.lineWidth = 1;\n    minorLines.forEach((e) => {\n      ctx.moveTo(e[0], e[1]);\n      ctx.lineTo(e[2], e[3]);\n    });\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.strokeStyle = colors.current.primary;\n    ctx.lineWidth = 1;\n    majorLines.forEach((e) => {\n      ctx.moveTo(e[0], e[1]);\n      ctx.lineTo(e[2], e[3]);\n    });\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.lineWidth = 3;\n    axes.forEach((e) => {\n      ctx.moveTo(e[0], e[1]);\n      ctx.lineTo(e[2], e[3]);\n    });\n    ctx.stroke();\n\n    // Draw labels\n    labelRects.forEach((e) => {\n      ctx.fillStyle = colors.current.background;\n      ctx.fillRect(e[0], e[1], e[2], e[3]);\n    });\n    labels.forEach((e) => {\n      ctx.fillStyle = colors.current.primary;\n      ctx.fillText(e[0], e[1], e[2]);\n    });\n\n    // Draw functions\n    var drawLine = (a, b) => { ctx.moveTo(a, b); }\n    for (let i = 0; i < functions.current.length; i++) {\n      let e = functions.current[i];\n      if (e === null) continue;\n      // clone memo first to prevent worker from changing data while drawing\n      let memoCopy = [...e.memo];\n      if (memoCopy.length !== 0) {\n        ctx.beginPath();\n        ctx.strokeStyle = e.color;\n        if (memoCopy[0].x < viewport.xMax && memoCopy[memoCopy.length-1].x > viewport.xMin) {\n          let lastY = viewport.yMin, isMoveTo = true;\n          for (let index = 0; index < memoCopy.length; index++) {\n            // check for vertical asymptote\n            if ((memoCopy[index].y < viewport.yMin && lastY > viewport.yMax) || (memoCopy[index].y > viewport.yMax && lastY < viewport.yMin)) {\n              ctx.stroke();\n              ctx.beginPath();\n              drawLine = (a, b) => { ctx.moveTo(a, b); }\n              isMoveTo = true;\n            }\n            lastY = memoCopy[index].y;\n            drawLine(\n              (memoCopy[index].x - viewport.xMin) * ctx.canvas.width / (viewport.xMax - viewport.xMin),\n              (viewport.yMax - memoCopy[index].y) * ctx.canvas.height / (viewport.yMax - viewport.yMin)\n            );\n            if (memoCopy[index].x > viewport.xMax) break;\n            if (isMoveTo) {\n              drawLine = (a, b) => { ctx.lineTo(a, b); }\n              isMoveTo = false;\n            }\n          }\n        }\n        ctx.stroke();\n      }\n    }\n  }\n\n  const getMousePos = (e) => {\n    const rect = canvasRef.current.getBoundingClientRect();\n\n    const scaleX = canvasRef.current.width / rect.width;\n    const scaleY = canvasRef.current.height / rect.height;\n    return {\n      x: (e.clientX - rect.left) * scaleX,\n      y: (e.clientY - rect.top) * scaleY\n    }\n  }\n\n  const moveGraph = (e) => {\n    if (!mouseDown.current) {\n      return;\n    }\n    if (mouseX.current === null || mouseY.current === null) {\n      console.error(\"Mouse position not set.\");\n    } else {\n      // cancel last animation frame if not run yet\n      if (animationFrameCall.current) {\n        cancelAnimationFrame(animationFrameCall.current);\n      }\n      animationFrameCall.current = requestAnimationFrame(() => {\n        // Get new mouse position\n        const mousePos = getMousePos(e);\n        \n        // Translate graph\n        const xRange = viewport.xMax - viewport.xMin;\n        const yRange = viewport.yMax - viewport.yMin;\n        const x = mouseX.current - mousePos.x * xRange / canvasRef.current.width;\n        const y = mouseY.current + mousePos.y * yRange / canvasRef.current.height;\n        setViewport({\n          xMin: x,\n          xMax: x + xRange,\n          yMin: y - yRange,\n          yMax: y\n        });\n\n        animationFrameCall.current = null;\n      });\n    }\n  }\n\n  const setLineWidth = () => {\n    if (canvasRef.current) {\n      const n = 20 * (viewport.xMax - viewport.xMin) / canvasRef.current.width;\n      const power = Math.pow(10, Math.floor(Math.log10(n)));\n      const mantissa = n / power;\n\n      if (mantissa === 1.0) {\n        minorWidth.current = power;\n        majorWidth.current = power * 5;\n      } else if (mantissa <= 2.0) {\n        minorWidth.current = power * 2;\n        majorWidth.current = power * 10;\n      } else if (mantissa <= 5.0) {\n        minorWidth.current = power * 5;\n        majorWidth.current = power * 20;\n      } else {\n        minorWidth.current = power * 10;\n        majorWidth.current = power * 50;\n      }\n    }\n  }\n\n  const handleMouseDown = (e) => {\n    // e.preventDefault();\n    mouseDown.current = true;\n\n    // Store current mouse position\n    const mousePos = getMousePos(e);\n    mouseX.current = mousePos.x * (viewport.xMax - viewport.xMin) \n                      / canvasRef.current.width + viewport.xMin;\n    mouseY.current = viewport.yMax - mousePos.y * (viewport.yMax - viewport.yMin) \n                      / canvasRef.current.height;\n  }\n\n  const handleMouseUp = () => {\n    if (animationFrameCall.current) {\n      cancelAnimationFrame(animationFrameCall.current);\n    }\n    mouseDown.current = false;\n    mouseX.current = mouseY.current = null;\n  }\n\n  // TODO: Edit this to scale zoom factor based on deltaY\n  const handleMouseWheel = (e) => {\n    e.preventDefault();\n    if (e.deltaY == 0) return;\n    const x = e.clientX * (viewport.xMax - viewport.xMin) / canvasRef.current.width + viewport.xMin;\n    const y = viewport.yMax - e.clientY * (viewport.yMax - viewport.yMin) / canvasRef.current.height;\n    if (e.deltaY > 0) {\n      // Zoom out centered at mouse position\n      setViewport({\n        xMin: (viewport.xMin - x) * zoomFactor + x,\n        xMax: (viewport.xMax - x) * zoomFactor + x,\n        yMin: (viewport.yMin - y) * zoomFactor + y,\n        yMax: (viewport.yMax - y) * zoomFactor + y\n      });\n    } else if (e.deltaY < 0) {\n      // Zoom in centered at mouse position\n      setViewport({\n        xMin: (viewport.xMin - x) / zoomFactor + x,\n        xMax: (viewport.xMax - x) / zoomFactor + x,\n        yMin: (viewport.yMin - y) / zoomFactor + y,\n        yMax: (viewport.yMax - y) / zoomFactor + y\n      });\n    }\n  }\n\n  const resize = () => {\n    setViewport((currentViewport) => {\n      if (canvasRef.current && containerRef.current) {\n        // Get all dimensions first\n        const prevWidth = canvasRef.current.width;\n        const prevHeight = canvasRef.current.height;\n        const newWidth = Math.ceil(containerRef.current.getBoundingClientRect().width);\n        const newHeight = Math.ceil(containerRef.current.getBoundingClientRect().height);\n        \n        console.log(`Dimensions: ${prevWidth}x${prevHeight} -> ${newWidth}x${newHeight}`);\n        console.log(`Current viewport before calc: x=(${viewport.xMin}, ${viewport.xMax}) y=(${viewport.yMin}, ${viewport.yMax})`);\n\n        // Do viewport calculations with the actual previous values\n        const xAvg = (currentViewport.xMin + currentViewport.xMax) / 2;\n        const yAvg = (currentViewport.yMin + currentViewport.yMax) / 2;\n        \n        const newViewport = {\n          xMin: (currentViewport.xMin - xAvg) * newWidth / prevWidth + xAvg,\n          xMax: (currentViewport.xMax - xAvg) * newWidth / prevWidth + xAvg,\n          yMin: (currentViewport.yMin - yAvg) * newHeight / prevHeight + yAvg,\n          yMax: (currentViewport.yMax - yAvg) * newHeight / prevHeight + yAvg\n        };\n    \n        console.log(`Calculated new viewport: x=(${newViewport.xMin}, ${newViewport.xMax}) y=(${newViewport.yMin}, ${newViewport.yMax})`);\n\n        // Update canvas size after calculations\n        canvasRef.current.width = newWidth;\n        canvasRef.current.height = newHeight;\n    \n        // Finally set the new viewport\n        return newViewport;\n      }\n    });\n  }\n\n  // Updates the memo for a function using the function's memoWorker\n  // bool redraw used to prevent multiple draws when updating multiple function memos\n  const updateMemo = async (functionObj, redraw) => {\n    if (functionObj === null) return;\n    await new Promise((resolve) => {\n      functionObj.memoWorker.onmessage = (e) => {\n        functionObj.memo = e.data;\n        resolve();\n      };\n      console.log(`updating memo with xMin=${viewport.xMin}, xMax=${viewport.xMax}`);\n      functionObj.memoWorker.postMessage({\n        canvasWidth: canvasRef.current.width,\n        viewPort: viewport\n      });\n    }).then(() => {\n      if (redraw) drawGraph();\n    });\n  }\n\n  useEffect(() => {\n    console.log(`viewport useEffect with x=(${viewport.xMin}, ${viewport.xMax}) y=(${viewport.yMin}, ${viewport.yMax})`);\n    setLineWidth();\n    drawGraph();\n    for (let i = 0; i < functions.current.length; i++) {\n      updateMemo(functions.current[i], (i == functions.current.length - 1));\n    }\n    console.log(`viewport useEffect ended with x=(${viewport.xMin}, ${viewport.xMax}) y=(${viewport.yMin}, ${viewport.yMax})`);\n  }, [viewport]);\n\n  useEffect(() => {\n    console.log(\"graph mounted\");\n    const preventZoom = (e) => {\n      if (e.ctrlKey || e.metaKey) {\n        e.preventDefault();\n      }\n    };\n    document.fonts.load(FONT).then(() => {\n      if (canvasRef.current && containerRef.current) {\n        canvasRef.current.width = containerRef.current.getBoundingClientRect().width;\n        canvasRef.current.height = containerRef.current.getBoundingClientRect().height;\n        const aspectRatio = containerRef.current.getBoundingClientRect().height / containerRef.current.getBoundingClientRect().width;\n        console.log(`initial aspect ratio: ${aspectRatio}`);\n        setViewport({\n          xMin: -12,\n          xMax: 12,\n          yMin: -12 * aspectRatio,\n          yMax: 12 * aspectRatio\n        });\n      }\n    });\n    window.addEventListener(\"resize\", resize);\n    window.addEventListener(\"wheel\", preventZoom, { passive: false });\n    return () => {\n      console.log(\"graph unmounted\");\n      window.removeEventListener(\"resize\", resize);\n      window.removeEventListener(\"wheel\", preventZoom);\n      if (functions.current.length !== 0) {\n        functions.current.forEach((e) => {\n          if (e !== null) e.memoWorker.terminate();\n        })\n      } \n    }\n  }, []);\n\n  return (\n    <div className={styles.container} style={{backgroundColor: darkMode ? \"#000\" : \"#fff\"}} ref={containerRef}>\n      <canvas \n        ref={canvasRef}\n        onMouseDown={(event) => handleMouseDown(event)}\n        onMouseUp={() => handleMouseUp()}\n        onMouseMove={(event) => moveGraph(event)}\n        onMouseLeave={() => handleMouseUp()}\n        onWheel={(event) => handleMouseWheel(event)}\n      />\n      <div className={styles.settings}>\n        <GraphSettings \n          textFont={FONT} \n          viewPort={viewport} \n          toggleDarkMode={() => {\n            if (darkMode) {\n              colors.current = {\n                primary: \"#000\",\n                secondary: \"#c0c0c0\",\n                background: \"#fff\"\n              };\n            } else {\n              colors.current = {\n                primary: \"#e6e6e6\",\n                secondary: \"#1f1f1f\",\n                background: \"#000\"\n              };\n            }\n            setDarkMode(!darkMode);\n            drawGraph();\n          }}\n          setViewport={(vp) => setViewport(vp)}\n        />\n      </div>\n      <div className={styles[\"function-list\"]}>\n        <FunctionList\n          darkMode={darkMode} \n          addFunction={async (index, functionStr, color) => {\n            let del = 0;\n            if (index < functions.current.length) {\n              del = 1;\n              if (functions.current[index] !== null) functions.current[index].memoWorker.terminate();\n            }\n            functions.current.splice(index, del, {\n              color: color,\n              memo: [],\n              memoWorker: new Worker(URL.createObjectURL(new Blob([workerStr], { type: \"application/javascript\" })))\n            });\n            await new Promise((resolve) => {\n              functions.current[index].memoWorker.onmessage = (e) => {\n                resolve();\n              };\n              functions.current[index].memoWorker.postMessage(functionStr);\n            }).then(() => {\n              updateMemo(functions.current[index], true);\n            });\n          }}\n          changeColor={(index, color) => {\n            functions.current[index].color = color;\n            drawGraph();\n          }}\n          deleteFunction={(index)=>{\n            if (index < functions.current.length) {\n              functions.current[index].memoWorker.terminate();\n              functions.current[index] = null;\n              drawGraph();\n            }\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default Graph;"],"names":["GraphSettings","props","_useState2","_slicedToArray","useState","isOpen","setIsOpen","_useState4","darkMode","setDarkMode","_useState6","viewPort","viewport","setViewport","_useState8","maintainAspectRatio","setMaintainAspectRatio","_useState10","errorMessageVisible","setErrorMessageVisible","inputMinX","useRef","inputMaxX","inputMinY","inputMaxY","errorMessage","isValidNumber","str","test","useEffect","current","value","xMin","toFixed","xMax","yMin","yMax","_jsxs","className","styles","style","_objectSpread","width","height","backgroundColor","color","children","_jsx","xmlns","viewBox","concat","filter","WebkitFilter","alt","onClick","id","d","x","y","rx","ry","display","alignItems","justifyContent","marginBottom","fontSize","whiteSpace","overflow","marginRight","type","event","toggleDarkMode","target","checked","margin","msFilter","defaultValue","ref","disabled","marginTop","cursor","onChange","e","visibility","hasInvalidNumber","invalidInputs","errorStr","length","substring","newViewport","parseFloat","aspectRatio","midY","newHeight","innerText","handleSetViewport","defaultColors","FunctionList","name","functions","setFunctions","inputRefs","numFunctions","wrapperRef","cursorPos","parseFunction","inputStr","index","_step","functionStr","_iterator","_createForOfIteratorHelper","s","n","done","currentChar","codePointAt","String","fromCodePoint","err","f","addFunction","selectionStart","pos","selectionEnd","focus","map","func","dark","light","onInput","changedInput","i","charAt","fromCharCode","includes","replace","functionsCopy","_toConsumableArray","changeChars","el","changeColor","deleteFunction","transform","transition","stroke","strokeWidth","strokeLinecap","strokeLinejoin","fill","FONT","zoomFactor","Math","pow","Graph","containerRef","mouseDown","canvasRef","mouseX","mouseY","majorWidth","minorWidth","animationFrameCall","colors","primary","secondary","background","drawGraph","formattedString","exp","toExponential","split","at","parseInt","firstNum","isNaN","ctx","getContext","font","clearRect","canvas","fillStyle","fillRect","strokeStyle","minorLines","majorLines","axes","labelRects","labels","startX","ceil","endX","floor","toPrecision","log10","abs","line","push","label","textWidth","measureText","textHeight","axisY","bottomY","padding","startY","endY","axisX","rightX","beginPath","lineWidth","forEach","moveTo","lineTo","fillText","drawLine","a","b","memoCopy","memo","lastY","isMoveTo","getMousePos","rect","getBoundingClientRect","scaleX","scaleY","clientX","left","clientY","top","handleMouseUp","cancelAnimationFrame","resize","currentViewport","prevWidth","prevHeight","newWidth","console","log","xAvg","yAvg","updateMemo","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","functionObj","redraw","wrap","_context","prev","next","abrupt","Promise","resolve","memoWorker","onmessage","data","postMessage","canvasWidth","then","stop","_x","_x2","apply","this","arguments","power","mantissa","setLineWidth","preventZoom","ctrlKey","metaKey","preventDefault","document","fonts","load","window","addEventListener","passive","removeEventListener","terminate","onMouseDown","mousePos","handleMouseDown","onMouseUp","onMouseMove","error","requestAnimationFrame","xRange","yRange","onMouseLeave","onWheel","deltaY","handleMouseWheel","textFont","vp","_ref2","_callee2","del","_context2","splice","Worker","URL","createObjectURL","Blob","_x3","_x4","_x5"],"mappings":"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"}